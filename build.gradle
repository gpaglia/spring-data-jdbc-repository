/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'gpaglia' at '3/10/17 8:02 PM' with Gradle 3.4.1
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.4.1/userguide/tutorial_java_projects.html
 */
 
 // global project constants
buildscript {
	ext {
		springFrameworkVersion = "5.0.0.M5"
		dependencyManagementPluginVersion = "1.0.1.RELEASE"
	}
	
	repositories {
        jcenter()
        //maven { url "https://repo.spring.io/snapshot" }
        maven { url "https://repo.spring.io/milestone" }
    }
    
    dependencies {
	    classpath("io.spring.gradle:dependency-management-plugin:${dependencyManagementPluginVersion}")
	}
}
 
 
// Apply the java plugin to add support for Java
apply plugin: 'groovy'
apply plugin: 'maven-publish'
apply plugin: 'io.spring.dependency-management'
	
sourceCompatibility = 1.8
targetCompatibility = 1.8

sourceSets {
	test {
	  groovy {
		// this makes the groovy-compiler compile groovy- as well
		// as java-files.
		// Needed, because java is normally compiled before groovy.
		// Since we are using groovy objects from java, we need it
		// the other way round.
		srcDirs = ['src/test/groovy', 'src/test/java']
	  }
	  java {
		srcDirs = [] // don't compile Java code twice
	  }
	}
}
// 
group = 'cz.jirutka.spring'
version = '0.6.0-GP-SNAPSHOT'
description = 'A repository implementation compatible with Spring Data abstraction that uses JdbcTemplate'
// Update wrapper to 3.4.1 release
	
task wrapper(type: Wrapper) {
   	gradleVersion = '3.4.1' // we want gradle 3.4.1 to run this project
}

task sourceJar(type: Jar) {
	from sourceSets.main.allJava
	classifier "source"
}

// In this section you declare where to find the dependencies of your project
repositories {
   	
	// maven local
	mavenLocal()
		
	maven {
		name "springMilestonesRepo"
       	url "https://repo.spring.io/libs-milestone"
   	}
    	
   	// spring
   	maven { url "https://repo.spring.io/milestone" }
   	
   	// Use 'jcenter' for resolving your dependencies.
   	jcenter()
    	
   	// Also maven central
   	mavenCentral()
}

publishing {
	repositories {
		mavenLocal()
	}
	publications {
		mavenJava(MavenPublication) {
			from components.java

			artifact sourceJar {
				classifier "sources"
			}
		}
	}
}
	
dependencyManagement {
	imports {
   		mavenBom 'org.springframework.data:spring-data-releasetrain:Ingalls-SR1'
	}
}
	

// In this section you declare the dependencies for your production and test code
dependencies {
    
   	// The production code uses the SLF4J logging API at compile time
   	compile 'org.slf4j:slf4j-api:1.7.24'
    	
   	// replace jcl because we exclude jcl from spring core
   	compile 'org.slf4j:jcl-over-slf4j:1.7.24'
    	
   	// logback classic and core
   	compile "ch.qos.logback:logback-classic:1.2.1"
   	compile "ch.qos.logback:logback-core:1.2.1"			// should be redundant ...
    	
   	// javax JSON api
   	compile "javax.json:javax.json-api:1.0"
    	
   	// Common spring
	compile("org.springframework:spring-core:${rootProject.ext.springFrameworkVersion}") {
		// exclude commons-logging from spring core
		exclude group: 'commons-logging', module: 'commons-logging'
	}
	compile "org.springframework:spring-beans:${springFrameworkVersion}"
	compile "org.springframework:spring-test:${springFrameworkVersion}"
   	compile "org.springframework:spring-context:${springFrameworkVersion}"
   	compile "org.springframework:spring-context-support:${springFrameworkVersion}"  
	compile "org.springframework:spring-jdbc:${springFrameworkVersion}"
	
	compile "org.springframework.data:spring-data-commons"
   	
	// Json provider
   	compile "org.glassfish:javax.json:1.0.4"  	

    // Declare the dependency for your favourite test framework you want to use in your tests.
    // TestNG is also supported by the Gradle Test task. Just change the
   	// testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
   	// 'test.useTestNG()' to your build script.
    	
   	testCompile 'junit:junit:4.12'
    	
   	// mockito 2.7.18
	testCompile 'org.mockito:mockito-core:2.7.18'
    	
   	// https://mvnrepository.com/artifact/org.hamcrest/hamcrest-all
	testCompile group: 'org.hamcrest', name: 'hamcrest-all', version: '1.3'
	
	// cglib
	testCompile 'cglib:cglib-nodep:3.2.1'
	
	// objensis
	testRuntime "org.objenesis:objenesis:2.5.1"    // allows mocking of classes without default constructor (together with CGLIB)
	
	// groovy
	testCompile 'org.codehaus.groovy:groovy:2.4.9'
	
	// spock
	// https://mvnrepository.com/artifact/org.spockframework/spock-core
	testCompile group: 'org.spockframework', name: 'spock-core', version: '1.1-groovy-2.4-rc-3'

	// https://mvnrepository.com/artifact/org.spockframework/spock-spring
	testCompile( group: 'org.spockframework', name: 'spock-spring', version: '1.1-groovy-2.4-rc-3' ) {
		exclude group: 'org.codehaus.groovy', module: 'groovy-all'
	}
	
	// https://mvnrepository.com/artifact/com.athaydes/spock-reports
	testRuntime group: 'com.athaydes', name: 'spock-reports', version: '1.2.13'
	
	
	testCompile "com.zaxxer:HikariCP-java7:2.4.11"
	
	// https://mvnrepository.com/artifact/com.h2database/h2
	testCompile group: 'com.h2database', name: 'h2', version: '1.4.194'
	
	// https://mvnrepository.com/artifact/mysql/mysql-connector-java
	testCompile group: 'mysql', name: 'mysql-connector-java', version: '6.0.6'
	
	// https://mvnrepository.com/artifact/net.sourceforge.jtds/jtds
	testCompile group: 'net.sourceforge.jtds', name: 'jtds', version: '1.3.1'
	
	// https://mvnrepository.com/artifact/org.apache.derby/derby
	testCompile group: 'org.apache.derby', name: 'derby', version: '10.13.1.1'
	
	// https://mvnrepository.com/artifact/org.hsqldb/hsqldb
	testCompile group: 'org.hsqldb', name: 'hsqldb', version: '2.3.4'
	
	// https://mvnrepository.com/artifact/org.mariadb.jdbc/mariadb-java-client
	testCompile group: 'org.mariadb.jdbc', name: 'mariadb-java-client', version: '1.5.9'
	
	// https://mvnrepository.com/artifact/org.postgresql/postgresql
	testCompile group: 'org.postgresql', name: 'postgresql', version: '42.0.0'
	
}
